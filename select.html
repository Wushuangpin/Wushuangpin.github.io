<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>福州市古厝文化信息检索与展示系统</title>
    <link rel="icon" type="image/x-icon" href="/images/title.ico" />
    <link href="/css/second.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="http://localhost:82/arcgis_js_api/library/3.20/3.20/esri/css/esri.css" />
    <link rel="stylesheet" href="http://localhost:82/arcgis_js_api/library/3.20/3.20/dijit/themes/tundra/tundra.css" />
    <script src="http://localhost:82/arcgis_js_api/library/3.20/3.20/init.js"></script>
    <style>
        html,
        body,
        #allmap {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <div id="allmap"></div>
    <a title="筛选" id="quit" style="position: absolute;right:
            2vw;top:2vh;width: 89px;cursor: pointer;
            height: 40px;line-height:40px;color: #ebedf0;border-radius:
            3px;background-color: rgba(37,37,37,.9);
            background-image:
            url(http://api0.map.bdimg.com/images/panorama/indoor_exit.png);background-repeat:
            no-repeat;
            background-position: 15px 12px;">
        <span style="margin-right: 12px; float: right;">筛选</span>
    </a>
</body>
<script type="text/javascript">
    var Tiled, toolbar;
    require([
        "esri/map",
        "esri/layers/ArcGISDynamicMapServiceLayer",
        "esri/layers/FeatureLayer",
        "esri/dijit/OverviewMap"
    ], function (Map, ArcGISDynamicMapServiceLayer, FeatureLayer, OverviewMap) {
        var map = new Map("allmap", {
            center: [119.39842, 26.004367],
            zoom: 13,
            basemap: "topo"
        });
        Tiled = new ArcGISDynamicMapServiceLayer("http://localhost:6080/arcgis/rest/services/my/poi/MapServer");
        map.addLayer(Tiled);
        var point = new FeatureLayer("http://localhost:6080/arcgis/rest/services/my/feature/FeatureServer/0")
        var line = new FeatureLayer("http://localhost:6080/arcgis/rest/services/my/feature/FeatureServer/1")
        var polygon = new FeatureLayer("http://localhost:6080/arcgis/rest/services/my/feature/FeatureServer/2")
        map.addLayers([polygon, line, point])
        var overviewMapDijit = new OverviewMap({
            map: map,
            expandFactor: 2,
            visible: true,
            attachTo: "bottom-left"
        });
        overviewMapDijit.startup();

    });
    document.getElementById("quit").onclick = function () {
        var layerDefinitions = [];
        layerDefinitions[0] = "district like '%闽侯县%'";
        Tiled.setLayerDefinitions(layerDefinitions);
        alert("ok")
    }; 
</script>

</html>